<form ng-submit="!form.$invalid && $ctrl.submit()" class="form-horizontal" name="form" novalidate>
  <div class="form-group" id="repeater-field">
    <label for="date" class="col-sm-2 control-label">Data</label>
    <div class="col-sm-10">
      <div class="input-group col-sm-6">
        <div class="input-group-prepend">
          <label for="date" class="input-group-text label-icon">
            <i class="oi oi-calendar"></i>
          </label>
        </div>
        <input type="date" id="date" name="date" class="datepicker form-control repeater" required size="10" maxlength="10" placeholder="aaaa-mm-gg" autocomplete="off" ng-model="$ctrl.withdrawal.date" />
      </div>
      <div class="clear alert alert-danger" ng-show="(form.$submitted || form.date.$dirty) && form.date.$invalid">
        <p class="mb-0" ng-show="form.date.$error.required">Il campo è obbligatorio.</p>
        <p class="mb-0" ng-show="form.date.$error.date">Deve essere una data.</p>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="user_id" class="col-sm-2 control-label">Utente</label>
    <div class="col-sm-10">
      <select id="user_id" name="user_id" class="form-control" ng-model="$ctrl.withdrawal.user_id" required>
        <option ng-repeat="user in $ctrl.users" ng-value="user.id">{{user.name}}</option>
      </select>
      <div class="alert alert-danger" ng-show="(form.$submitted || form.user_id.$dirty) && form.user_id.$invalid">
        <p class="mb-0" ng-show="form.user_id.$error.required">Il campo è obbligatorio.</p>
      </div>
    </div>
  </div>

  <div class="form-group">
    <label for="amount" class="col-sm-2 control-label">Prelevati</label>
    <div class="col-sm-10">
      <input type="number" step="0.1" id="amount" name="amount" class="form-control" ng-model="$ctrl.withdrawal.amount" />
    </div>
    <div class="alert alert-danger" ng-show="(form.$submitted || form.amount.$dirty) && form.amount.$invalid">
      <p class="mb-0" ng-show="form.amount.$error.required">Il campo è obbligatorio.</p>
      <p class="mb-0" ng-show="form.amount.$error.number">Deve essere un numero.</p>
    </div>
  </div>

  <div class="form-group">
    <label for="note" class="col-sm-2 control-label">Note</label>
    <div class="col-sm-10">
      <textarea id="note" name="note" class="form-control" ng-model="$ctrl.withdrawal.note" maxlength="4000"></textarea>
    </div>
    <div class="clear alert alert-danger" ng-show="(form.$submitted || form.note.$dirty) && form.note.$invalid">
      <p class="mb-0" ng-show="form.date.$error.maxlength">Non devi superare i 4000 caratteri.</p>
    </div>
  </div>

  <div class="form-group">
    <div class="col-sm-offset-2 col-sm-10">
      <button type="submit" class="btn btn-default">Salva</button>
    </div>
  </div>
</form>

<a ng-if="$ctrl.withdrawal.id" href="/#!/withdrawals/{{$ctrl.withdrawal.id}}">Show</a>
